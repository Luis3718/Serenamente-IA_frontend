<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actividad 3: Respiraci√≥n Consciente</title>
    <link rel="stylesheet" href="actividad.css">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <a href="index.html">
                    <img src="logo.jpeg" alt="Logo SerenaMente IA" class="logo">
                </a>
            </div>
            <button class="menu-toggle" aria-label="Toggle Menu">&#9776;</button>
            <nav class="submenu">
                <ul>
                    <li><a href="actividades.html">Mis actividades</a></li>
                    <li><a href="progreso.html">Mi progreso</a></li>
                    <div class="user-menu">
                        <div id="user-avatar" class="avatar">US</div>
                        <div id="user-dropdown" class="dropdown-menu">
                            <a href="perfil.html">Ver perfil</a>
                            <a href="#" id="logout">Cerrar sesi√≥n</a>
                        </div>
                    </div>                        
                </ul>
            </nav>
        </div>
    </header>
    

    <!-- Contenido principal -->
    <main>
        <div class="container">
            <h1>Actividad 3: Respiraci√≥n Consciente</h1>
            <p class="objetivo"><strong>Objetivo:</strong> En esta actividad comenzar√°s a usar la respiraci√≥n como ancla para la atenci√≥n y la regulaci√≥n emocional.</p>
            
            <p>¬°Hola, estoy emocionado porque vas a comenzar tu primera pr√°ctica! Con ella damos inicio a las actividades de mindfulness, lo que te permitir√° comenzar a explorar lo que sucede en tu cuerpo, con tus sensaciones y a prestar atenci√≥n a tus sentidos de forma intencional.</p>
            
            <p>Revisa el siguiente video, que te dar√° instrucciones sobre c√≥mo realizar tu pr√°ctica mindfulness en la que comenzar√°s a usar la respiraci√≥n como ancla para la atenci√≥n y la regulaci√≥n emocional.
                <br>Recuerda que para practicar mindfulness, es importante dejar de lado la idea de hacerlo bien. Lo que te recomiendo es que trates de entregarte a la experiencia y verlo como un proceso que ir√°s integrando poco a poco en tu vida. No olvides que, cuanto m√°s lo practiques, m√°s beneficios notar√°s.

            </p>
            
            <div class="videoo-container">
                <video id="practiceVideo" controls>
                    <source src="Imagenes0/video03.mp4" type="video/mp4">
                    Tu navegador no soporta la reproducci√≥n de videos.
                </video>
            </div>
            
            <p>¬°Excelente! Terminaste tu primera pr√°ctica de Mindfulness. ¬øQu√© te pareci√≥? Me gustar√≠a que pudieras compartir tu experiencia.</p>
            <div id="final-message" class="hidden">
                <p><strong>¬°Felicidades por haber logrado esta primera habilidad: "Comenzar a trabajar en m√≠"!</strong></p>
                <p>Aprendiste qu√© es el mindfulness, c√≥mo funciona esta intervenci√≥n y tuviste la oportunidad de experimentar tu primera pr√°ctica de respiraci√≥n consciente.</p>
                <p>Este es solo el comienzo de tu proceso. Recuerda que, con la pr√°ctica, podr√°s mejorar tu conexi√≥n con el momento presente y con tus emociones, lo que te ayudar√° a alcanzar una mayor comprensi√≥n de qui√©n eres y de tu bienestar. ¬°Gracias por haberte conectado!</p>
                <div class="button-container">
                    <a href="dash.html" class="button">Regresar al men√∫ inicial</a>
                </div>
            </div>
              

    </div>
        
    <div id="chatbot-wrapper" class="chatbot-wrapper hidden">
        <div id="chatbot-container" class="chatbot-container">
            <div class="chatbot-header">Chatbot</div>
            <div class="chatbot-messages" id="chatbot-messages"></div>
            <div class="chatbot-input" id="chatbot-input"></div>
        </div>
    </div>
    
 
    
        
       
    </main>

    <div class="social-bar">
        <a href="https://www.facebook.com/SerenaMenteUNAM?_rdc=1&_rdr#" target="_blank" class="social-icon">
            <img src="static/imagenes/Logo_facebook.png" alt="Facebook">
        </a>
        <a href="https://www.instagram.com/serenamente_app/?igshid=YTQwZjQ0NmI0OA%3D%3D" target="_blank" class="social-icon">
            <img src="static/imagenes/Logo_instagram.png" alt="Instagram">
        </a>
        <a href="https://www.youtube.com/@SerenaMente-xk7tm" target="_blank" class="social-icon">
            <img src="static/imagenes/Logo_youtube.png" alt="YouTube">
        </a>
    
    </div>
    
    <!--Banner con logos-->
    <div class="banner-section">
        <div class="banner-logo">
            <img src="static/imagenes/LOGO.png" alt="Logo SerenaMente">
        </div>
        <div class="banner-text">
            <p>Cuenta con el respaldo y colaboraci√≥n de investigadores e investigadoras de las siguientes instituciones.</p>
        </div>
        <div class="banner-logos">
            <a href="https://www.unam.mx">
                <img src="static/imagenes/Logo1.png" alt="Logo UNAM">
            </a>
            <a href="https://suayed.iztacala.unam.mx/">
                <img src="static/imagenes/Logo2.png" alt="Logo SUAYED">
            </a>
            <a href="https://labpsiit.iztacala.unam.mx/">
                <img src="static/imagenes/Logo3.png" alt="Logo LABPSITT">
            </a>
            <a href="https://www.ipn.mx/">
                <img src="static/imagenes/Logo4.png" alt="Logo IPN">
            </a>
            <a href="https://www.escom.ipn.mx/">
                <img src="static/imagenes/Logo5.png" alt="Logo ESCOM">
            </a>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-text">
                <h3>¬øTienes dudas?</h3>
                <p>Si tienes m√°s preguntas o dudas sobre cualquier tema, puedes contactarnos y seguro te responderemos.</p>
            </div>
            <div class="footer-buttons">
                <a href="mailto:serenamente@iztacala.unam.mx" class="footer-btn">Correo electr√≥nico</a>
                <a href="avisoprivacidad.html" class="footer-btn">Aviso de Privacidad</a>
            </div>
        </div>
    </footer>

    <script>
        // Funcion para el menu de hamburguesa
        const menuToggle = document.querySelector('.menu-toggle');
        const submenu = document.querySelector('.submenu');

        menuToggle.addEventListener('click', () => {
            submenu.classList.toggle('active'); // Alterna la clase 'active' para mostrar/ocultar el men√∫
        });

        // Funcion que verifica el token y si se contesto el pretest
        async function verificarAutenticacion() {
            const token = localStorage.getItem("token");
            if (!token) {
                window.location.href = "login.html";
                return;
            }

            try {
                const response = await fetch("http://localhost:8002/auth/verify-token", {
                    method: "GET",
                    headers: { "Authorization": `Bearer ${token}` }
                });

                if (!response.ok) {
                    console.error("Error en la autenticaci√≥n:", await response.json());
                    localStorage.removeItem("token");
                    window.location.href = "login.html";
                    return;
                }

                const userData = await response.json();
                const initials = userData.usuario.nombre
                .split(" ")
                .map(word => word[0])
                .join("")
                .toUpperCase();
                document.getElementById("user-avatar").textContent = initials;
            } catch (error) {
                console.error("Error en la autenticaci√≥n:", error);
                window.location.href = "login.html";
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
        const avatar = document.getElementById("user-avatar");
        const userMenu = document.querySelector(".user-menu");

        avatar.addEventListener("click", function () {
            userMenu.classList.toggle("active");
        });

        document.getElementById("logout").addEventListener("click", function () {
            localStorage.removeItem("token");
            window.location.href = "login.html";
        });
        //verificarAutenticacion();
    });
    document.getElementById('practiceVideo').addEventListener('ended', function() {
            document.getElementById('chatbot-container').classList.remove('hidden');
        });
        
        function submitResponses() {
            alert('Tus respuestas han sido enviadas. ¬°Gracias por compartir tu experiencia!');
            document.getElementById('chatbot-container').classList.add('hidden');
            document.getElementById('final-message').classList.remove('hidden');
        }
    //
     //animacion de tchatbot

document.addEventListener("DOMContentLoaded", () => {
    const video = document.querySelector("video");
    
    const chatbot = document.getElementById("chatbot-wrapper");

    const messages = document.getElementById("chatbot-messages");
    const inputArea = document.getElementById("chatbot-input");

    const preguntas = [
        {
            texto: "¬øTe fue posible realizar toda la pr√°ctica?",
            tipo: "select",
            opciones: ["S√≠, todo bien", "No, tuve dificultades"]
        },
        {
            texto: "¬øQu√© tan presente te sentiste durante la pr√°ctica?",
            tipo: "select",
            opciones: ["Nada presente", "Un poco presente", "Moderadamente presente", "Muy presente", "Completamente presente"]
        },
        {
            texto: "¬øQu√© notaste en tu cuerpo durante tu pr√°ctica? (Marca todas las que apliquen)",
            tipo: "multi",
            opciones: ["Tensi√≥n muscular", "Sensaci√≥n de calor", "Sensaci√≥n de fr√≠o", "Incomodidad", "Dolor", "Relajaci√≥n", "Ligereza", "Pesadez", "Hormigueo", "Otro"]
        },
        {
            texto: "¬øQu√© pensamientos o emociones surgieron durante tu pr√°ctica? (Marca todas las que apliquen)",
            tipo: "multi",
            opciones: ["Preocupaci√≥n por el futuro", "Recuerdos del pasado", "Autocr√≠tica", "Juicio hacia otros", "Frustraci√≥n", "Tristeza", "Alegr√≠a", "Calma", "Paz", "Ira", "Miedo", "Otro (especificar):"]
        },
        {
            texto: "¬øIdentificaste alguna conexi√≥n con tu forma de vivir el estr√©s?",
            tipo: "select",
            opciones: ["S√≠, claramente", "Posiblemente", "No, no lo creo", "No estoy seguro/a"]
        },
        {
            texto: "¬øNotaste algunas de estas experiencias durante la pr√°ctica? (Marca todas las que apliquen)",
            tipo: "multi",
            opciones: ["Pensamientos autom√°ticos", "Recuerdos vividos", "Emociones desagradables", "Inquietud", "Aburrimiento", "Sue√±o", "Preocupaciones", "Recuerdos", "Emociones agradables", "Conmovido/a", "Claridad mental", "Consciencia expandida", "Sentirte con m√°s energ√≠a", "Tranquilidad", "Cosquilleo", "Relajaci√≥n muscular", "Sensaciones internas"]
        }
    ];

    let respuestas = {};
    let indice = 0;

    function mostrarPregunta() {
        inputArea.innerHTML = "";

        const pregunta = preguntas[indice];

        const burbuja = document.createElement("div");
        burbuja.className = "mensaje-bot typing-question";
        messages.appendChild(burbuja);

        escribirPalabraPorPalabra(burbuja, pregunta.texto, () => {
            burbuja.classList.remove("typing-question");

            if (pregunta.tipo === "select") {
                const select = document.createElement("select");
                pregunta.opciones.forEach(op => {
                    const opt = document.createElement("option");
                    opt.textContent = op;
                    select.appendChild(opt);
                });
                inputArea.appendChild(select);

                const btn = crearBoton(() => {
                    respuestas[`pregunta_${indice}`] = select.value;
                    siguiente();
                });
                inputArea.appendChild(btn);

            } else if (pregunta.tipo === "multi") {
                const contenedor = document.createElement("div");
                contenedor.className = "multi-options";

                pregunta.opciones.forEach(op => {
                    const btn = document.createElement("button");
                    btn.type = "button";
                    btn.textContent = op;
                    btn.onclick = () => btn.classList.toggle("selected");
                    contenedor.appendChild(btn);
                });

                inputArea.appendChild(contenedor);

                if (pregunta.texto.includes("Otro")) {
                    const input = document.createElement("input");
                    input.placeholder = "Especifica aqu√≠ si elegiste 'Otro'";
                    contenedor.appendChild(input);
                }

                const btn = crearBoton(() => {
                    const seleccionados = Array.from(contenedor.querySelectorAll(".selected")).map(b => b.textContent);
                    const otro = contenedor.querySelector("input")?.value;
                    if (otro) seleccionados.push(otro);
                    respuestas[`pregunta_${indice}`] = seleccionados;
                    siguiente();
                });
                inputArea.appendChild(btn);
            }

            messages.scrollTop = messages.scrollHeight;
        });
    }

    function crearBoton(fn) {
        const btn = document.createElement("button");
        btn.textContent = "Siguiente";
        btn.className = "boton-enviar";
        btn.onclick = fn;
        return btn;
    }

    function escribirPalabraPorPalabra(el, texto, callback) {
        const palabras = texto.split(" ");
        let i = 0;

        function escribir() {
            if (i < palabras.length) {
                el.textContent += palabras[i] + " ";
                i++;
                setTimeout(escribir, 50);
            } else {
                callback();
            }
        }
        escribir();
    }

    function siguiente() {
    indice++;
    if (indice < preguntas.length) {
        mostrarPregunta();
    } else {
        inputArea.innerHTML = "";

        const gracias = document.createElement("div");
        gracias.className = "mensaje-bot";
        gracias.textContent = "Gracias por tus respuestas üßò‚Äç‚ôÄÔ∏èüßò‚Äç‚ôÇÔ∏è";
        messages.appendChild(gracias);
        messages.scrollTop = messages.scrollHeight;

        // Esperamos 2 segundos y mostramos mensaje final en el contenedor principal
        setTimeout(() => {
            document.getElementById('chatbot-wrapper').classList.remove('hidden');

            document.getElementById("final-message").classList.remove("hidden");

        }, 2000);
    }
}


    // Mostrar chatbot solo al terminar el video
    video.addEventListener("ended", () => {
        chatbot.classList.remove("hidden");
        mostrarPregunta();
    });
});
</script>

</body>
</html>











